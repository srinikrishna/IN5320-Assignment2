{"version":3,"file":"lib.js","sources":["../../src/FatalErrorBoundary/styles/FatalErrorBoundary.style.js","../../src/FatalErrorBoundary/index.js","../../src/locales/index.js","../../src/AuthBoundary/LoginModal.js","../../src/AuthBoundary/useLocale.js","../../src/AuthBoundary/index.js","../../src/styles.js","../../src/index.js"],"sourcesContent":["import css from 'styled-jsx/css'\n\nconst bgColor = '#F4F6F8',\n    iconColor = '#B0BEC5',\n    primaryTextColor = '#000000',\n    secondaryTextColor = '#494949',\n    errorColor = 'red'\n\nexport default css`\n    .mask {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        right: 0px;\n        bottom: 0px;\n\n        overflow: auto;\n        overflow-y: auto;\n\n        color: ${primaryTextColor};\n        background-color: ${bgColor};\n\n        display: flex;\n\n        min-width: 640px;\n        min-height: 480px;\n\n        align-items: center;\n        justify-content: center;\n    }\n\n    .container {\n        text-align: center;\n        color: black;\n    }\n\n    .icon {\n        width: 96px;\n        height: 96px;\n        color: ${iconColor};\n        margin-bottom: 24px;\n    }\n\n    .message {\n        font-size: 24px;\n        margin-bottom: 24px;\n    }\n\n    .link {\n        font-size: 18px;\n        text-decoration: underline;\n        cursor: pointer;\n        margin-bottom: 24px;\n    }\n\n    .drawerToggle {\n        font-size: 12px;\n        color: ${secondaryTextColor};\n        text-decoration: underline;\n        cursor: pointer;\n        margin-bottom: 12px;\n    }\n\n    .drawerVisible {\n        padding: 8px;\n        display: block;\n        height: 150px;\n        width: 500px;\n        overflow: auto;\n        overflow-y: auto;\n        border: 1px solid ${secondaryTextColor};\n        text-align: left;\n    }\n\n    .drawerHidden {\n        display: none;\n    }\n\n    .errorIntro {\n        font-size: 12px;\n        line-height: 1.2;\n        color: ${secondaryTextColor};\n        margin-bottom: 8px;\n        font-family: Menlo, Courier, monospace !important;\n    }\n\n    .errorDetails {\n        font-size: 12px;\n        line-height: 1.2;\n        color: ${errorColor};\n        font-family: Menlo, Courier, monospace !important;\n    }\n`\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport i18n from '@dhis2/d2-i18n'\nimport styles from './styles/FatalErrorBoundary.style'\n\nconst translatedErrorHeading = i18n.t(\n    'An error occurred in the DHIS2 application.'\n)\n\nconst replaceNewlinesWithBreaks = text =>\n    text\n        .split('\\n')\n        .reduce((out, line, i) => [...out, line, <br key={i} />], [])\n\nexport class FatalErrorBoundary extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            error: null,\n            errorInfo: null,\n            drawerOpen: false,\n        }\n    }\n\n    componentDidCatch(error, errorInfo) {\n        this.setState({\n            error,\n            errorInfo,\n        })\n    }\n\n    toggleTechInfoDrawer = () => {\n        this.setState({\n            drawerOpen: !this.state.drawerOpen,\n        })\n    }\n\n    render() {\n        const { children } = this.props\n        if (this.state.error) {\n            return (\n                <div className=\"mask\">\n                    <style jsx>{styles}</style>\n                    <div className=\"container\">\n                        {/* <InfoIcon className=\"icon\" /> */}\n                        <div className=\"message\">\n                            {i18n.t('Something went wrong')}\n                        </div>\n                        <div\n                            className=\"link\"\n                            onClick={() => window.location.reload()}\n                        >\n                            {i18n.t('Refresh to try again')}\n                        </div>\n                        <div\n                            className=\"drawerToggle\"\n                            onClick={this.toggleTechInfoDrawer}\n                        >\n                            {this.state.drawerOpen\n                                ? i18n.t('Hide technical details')\n                                : i18n.t('Show technical details')}\n                        </div>\n                        <div\n                            className={\n                                this.state.drawerOpen\n                                    ? 'drawerVisible'\n                                    : 'drawerHidden'\n                            }\n                        >\n                            <div className=\"errorIntro\">\n                                {translatedErrorHeading}\n                                <br />\n                                {i18n.t(\n                                    'The following information may be requested by technical support.'\n                                )}\n                            </div>\n                            <div className=\"errorDetails\">\n                                {[\n                                    replaceNewlinesWithBreaks(\n                                        this.state.error.stack +\n                                            '\\n---' +\n                                            this.state.errorInfo.componentStack\n                                    ),\n                                ]}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n\n        return children\n    }\n}\n\nFatalErrorBoundary.propTypes = {\n    children: PropTypes.node.isRequired,\n}\n","//------------------------------------------------------------------------------\n// <auto-generated>\n  // This code was generated by d2-i18n-generate.\n  //\n  // Changes to this file may cause incorrect behavior and will be lost if\n  // the code is regenerated.\n  // </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\n\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\n\nconst namespace = 'default';\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\n\nexport default i18n;\n","import React, { useState } from 'react'\nimport i18n from '../locales'\nimport {\n    Modal,\n    ModalTitle,\n    ModalContent,\n    ModalActions,\n    Button,\n    InputField,\n} from '@dhis2/ui'\n\nconst staticUrl = process.env.REACT_APP_DHIS2_BASE_URL\n\nexport const LoginModal = () => {\n    const [server, setServer] = useState(\n        staticUrl || window.localStorage.DHIS2_BASE_URL || ''\n    )\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [isDirty, setIsDirty] = useState(false)\n\n    const isValid = val => val && val.length >= 2\n\n    const onSubmit = async e => {\n        e.preventDefault()\n        setIsDirty(true)\n        if (isValid(server) && isValid(username) && isValid(password)) {\n            window.localStorage.DHIS2_BASE_URL = server\n            try {\n                await fetch(\n                    `${server}/dhis-web-commons-security/login.action`,\n                    {\n                        method: 'POST',\n                        credentials: 'include',\n                        body: `j_username=${username}&j_password=${password}`,\n                        headers: {\n                            'X-Requested-With': 'XMLHttpRequest',\n                            Accept: 'application/json',\n                            'Content-Type': 'application/x-www-form-urlencoded',\n                        },\n                    }\n                )\n            } catch (e) {\n                console.log(\n                    'TODO: This will always error and cancel the request until we get a real login endpoint!'\n                )\n            }\n\n            // TODO: Hacky solution... this shouldn't require a reload\n            window.location.reload()\n        }\n    }\n\n    return (\n        <Modal open small dataTest=\"dhis2-adapter-loginmodal\">\n            <form onSubmit={onSubmit}>\n                <ModalTitle>{i18n.t('Please sign in')}</ModalTitle>\n\n                <ModalContent>\n                    {!staticUrl && (\n                        <InputField\n                            dataTest=\"dhis2-adapter-loginserver\"\n                            error={isDirty && !isValid(server)}\n                            label={i18n.t('Server')}\n                            name=\"server\"\n                            type=\"text\"\n                            value={server}\n                            onChange={input => setServer(input.value)}\n                        />\n                    )}\n\n                    <InputField\n                        dataTest=\"dhis2-adapter-loginname\"\n                        error={isDirty && !isValid(username)}\n                        label={i18n.t('Username')}\n                        name=\"j_username\"\n                        type=\"text\"\n                        value={username}\n                        onChange={input => setUsername(input.value)}\n                    />\n\n                    <InputField\n                        dataTest=\"dhis2-adapter-loginpassword\"\n                        error={isDirty && !isValid(password)}\n                        label={i18n.t('Password')}\n                        name=\"j_password\"\n                        type=\"password\"\n                        value={password}\n                        onChange={input => setPassword(input.value)}\n                    />\n                </ModalContent>\n\n                <ModalActions>\n                    <Button\n                        primary\n                        dataTest=\"dhis2-adapter-loginsubmit\"\n                        type=\"submit\"\n                    >\n                        {i18n.t('Sign in')}\n                    </Button>\n                </ModalActions>\n            </form>\n        </Modal>\n    )\n}\n","import { useEffect } from 'react'\nimport i18n from '@dhis2/d2-i18n'\nimport moment from 'moment'\n\ni18n.setDefaultNamespace('default')\n\nconst simplifyLocale = locale => {\n    const idx = locale.indexOf('-')\n    if (idx === -1) {\n        return locale\n    }\n    return locale.substr(0, idx)\n}\n\nconst setGlobalLocale = locale => {\n    if (locale !== 'en' && locale !== 'en-us') {\n        import(`moment/locale/${locale}`).catch(() => {\n            /* ignore */\n        })\n    }\n    moment.locale(locale)\n\n    const simplifiedLocale = simplifyLocale(locale)\n    i18n.changeLanguage(simplifiedLocale)\n}\n\nexport const useLocale = locale => {\n    useEffect(() => {\n        setGlobalLocale(locale || window.navigator.language)\n    }, [locale])\n}\n","import React from 'react'\nimport { useDataQuery } from '@dhis2/app-runtime'\n\nimport { Layer, layers, CenteredContent, CircularLoader } from '@dhis2/ui'\nimport { LoginModal } from './LoginModal'\nimport { useLocale } from './useLocale'\n\nconst settingsQuery = {\n    userSettings: {\n        resource: 'userSettings',\n    },\n}\n\nexport const AuthBoundary = ({ url, children }) => {\n    const { loading, error, data } = useDataQuery(settingsQuery)\n    useLocale(data && data.userSettings.keyUiLocale)\n\n    if (loading) {\n        return (\n            <Layer translucent level={layers.alert}>\n                <CenteredContent>\n                    <CircularLoader />\n                </CenteredContent>\n            </Layer>\n        )\n    }\n\n    if (error) {\n        return <LoginModal url={url} />\n    }\n\n    return children\n}\n","import css from 'styled-jsx/css'\n\nexport const styles = css`\n    div.app-shell-adapter {\n        width: 100vw;\n        height: 100vh;\n\n        display: flex;\n        flex-direction: column;\n    }\n    div.app-shell-app {\n        flex: 1 1 auto;\n        overflow: auto;\n        height: 100%;\n    }\n`\n","import React from 'react'\nimport { HeaderBar } from '@dhis2/ui'\nimport { Provider } from '@dhis2/app-runtime'\nimport { FatalErrorBoundary } from './FatalErrorBoundary'\nimport { AuthBoundary } from './AuthBoundary'\n\nimport { styles } from './styles.js'\n\n// eslint-disable-next-line react/prop-types\nconst App = ({ url, apiVersion, appName, children }) => (\n    <FatalErrorBoundary>\n        <Provider config={{ baseUrl: url, apiVersion: apiVersion }}>\n            <div className=\"app-shell-adapter\">\n                <style jsx>{styles}</style>\n                <HeaderBar appName={appName} />\n                <AuthBoundary url={url}>\n                    <div className=\"app-shell-app\">{children}</div>\n                </AuthBoundary>\n            </div>\n        </Provider>\n    </FatalErrorBoundary>\n)\n\nexport default App\n"],"names":["bgColor","iconColor","primaryTextColor","secondaryTextColor","errorColor","translatedErrorHeading","i18n","t","replaceNewlinesWithBreaks","text","split","reduce","out","line","i","React","FatalErrorBoundary","Component","constructor","props","setState","drawerOpen","state","error","errorInfo","componentDidCatch","render","children","window","location","reload","toggleTechInfoDrawer","stack","componentStack","propTypes","PropTypes","node","isRequired","namespace","addResources","enTranslations","esTranslations","frTranslations","staticUrl","process","env","REACT_APP_DHIS2_BASE_URL","LoginModal","server","setServer","useState","localStorage","DHIS2_BASE_URL","username","setUsername","password","setPassword","isDirty","setIsDirty","isValid","val","length","onSubmit","e","preventDefault","fetch","method","credentials","body","headers","Accept","console","log","Modal","ModalTitle","ModalContent","InputField","input","value","ModalActions","Button","setDefaultNamespace","simplifyLocale","locale","idx","indexOf","substr","setGlobalLocale","catch","moment","simplifiedLocale","changeLanguage","useLocale","useEffect","navigator","language","settingsQuery","userSettings","resource","AuthBoundary","url","loading","data","useDataQuery","keyUiLocale","Layer","layers","alert","CenteredContent","CircularLoader","styles","App","apiVersion","appName","Provider","baseUrl","HeaderBar"],"mappings":"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"}